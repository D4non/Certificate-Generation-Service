# Certificate Generation Service

Сервис для генерации сертификатов участников мероприятий с поддержкой мультитенантности для различных организаций.

## Возможности

- **Мультитенантность**: Поддержка нескольких организаций с индивидуальными цветами и логотипами
- **Загрузка участников**: Импорт из CSV/XLSX файлов или ручное добавление
- **Управление шаблонами**: Создание и редактирование шаблонов сертификатов (SVG/HTML) с предпросмотром
- **Генерация PDF**: Автоматическая генерация сертификатов в формате PDF
- **Темная/светлая тема**: Переключение между темами оформления
- **Многоязычность**: Поддержка русского и английского языков
- **Управление участниками**: Редактирование, удаление, множественный выбор

## Технологии

### Frontend
- React 18 + TypeScript
- Vite
- Tailwind CSS
- React Router
- Axios
- React Hot Toast
- Lucide React
- XLSX (для парсинга Excel)

### Backend
- FastAPI
- Python 3
- ReportLab (для генерации PDF)
- Uvicorn

## Установка и запуск

### Требования
- Node.js 18+ и npm
- Python 3.8+
- pip

### Backend

1. Перейдите в директорию backend:
```bash
cd backend
```

2. Создайте виртуальное окружение:
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Запустите сервер:
```bash
python main.py
```

Сервер будет доступен по адресу `http://localhost:8000`

### Frontend

1. Перейдите в директорию frontend:
```bash
cd frontend
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите dev-сервер:
```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

## Вход в систему

### Логины и пароли по организациям

1. **Фонд** (цвет: `#5601da`)
   - Логин: `fund`
   - Пароль: `fund123`

2. **Лицей** (цвет: `#5b1e3d`)
   - Логин: `lyceum`
   - Пароль: `lyceum123`

3. **Федеральная территория** (цвет: `#58a931`)
   - Логин: `ft`
   - Пароль: `ft123`

4. **Университет** (цвет: `#16bfc2`)
   - Логин: `university`
   - Пароль: `university123`

5. **Гимназия** (цвет: `#2a2840`)
   - Логин: `gymnasium`
   - Пароль: `gymnasium123`

### Дополнительные логины (для совместимости)

- **admin** / `admin123` — привязан к Фонду
- **user** / `user123` — привязан к Фонду

После входа интерфейс автоматически применит цвета выбранной организации.

## Использование

### Загрузка участников

1. **Из файла**: Нажмите "Загрузить файл" и выберите CSV или XLSX файл
   - Файл должен содержать колонки: ФИО, Email, Роль (опционально), Место (опционально)
   
2. **Вручную**: Нажмите "Добавить участника" и заполните форму

### Управление шаблонами

1. Нажмите "Новый шаблон" для создания нового шаблона
2. Выберите тип (SVG или HTML)
3. Загрузите файл шаблона
4. Редактируйте содержимое в реальном времени
5. Используйте кнопку "Показать превью" для предпросмотра

### Генерация сертификатов

1. Выберите шаблон из списка
2. Укажите название мероприятия
3. Установите дату выдачи (опционально)
4. Настройте отправку по email (опционально)
5. Нажмите "Сгенерировать сертификаты"
6. Скачайте ZIP-архив с сертификатами

## Структура проекта

```
Certificate Generation Service/
├── backend/
│   ├── main.py              # FastAPI приложение
│   ├── requirements.txt     # Python зависимости
│   ├── templates/           # Базовые шаблоны
│   └── uploads/            # Загруженные файлы
│       ├── templates/       # Шаблоны пользователей
│       └── certificates/    # Сгенерированные сертификаты
├── frontend/
│   ├── src/
│   │   ├── api/            # API клиенты
│   │   ├── components/     # React компоненты
│   │   ├── contexts/       # React контексты (Auth, Theme, Language, Organization)
│   │   ├── config/         # Конфигурация (организации)
│   │   ├── pages/          # Страницы приложения
│   │   └── main.tsx        # Точка входа
│   ├── package.json
│   └── vite.config.ts
└── README.md
```

## Особенности

### Мультитенантность

Каждая организация имеет:
- Уникальный цвет (применяется к шапке и кнопкам)
- Возможность добавления логотипа
- Отдельных пользователей

Цвета организаций настраиваются в `frontend/src/config/organizations.ts`

### Темы оформления

- **Светлая тема**: Белый фон, темный текст
- **Темная тема**: Темный фон, светлый текст
- Шапка всегда использует цвет организации

### Языки

- Русский (по умолчанию)
- Английский

Переключение через кнопку в шапке.

## API Endpoints

### Авторизация
- `POST /api/auth/login` - Вход в систему

### Шаблоны
- `GET /api/templates` - Получить список шаблонов
- `POST /api/templates/upload` - Загрузить новый шаблон
- `PUT /api/templates/{id}` - Обновить шаблон
- `DELETE /api/templates/{id}` - Удалить шаблон
- `GET /api/templates/{id}/file` - Получить файл шаблона

### Сертификаты
- `POST /api/certificates/generate` - Сгенерировать сертификаты
- `GET /api/certificates/download/{filename}` - Скачать ZIP с сертификатами

## Разработка

### Запуск в режиме разработки

Backend:
```bash
cd backend
source venv/bin/activate
python main.py
```

Frontend:
```bash
cd frontend
npm run dev
```

### Сборка для продакшена

Frontend:
```bash
cd frontend
npm run build
```

Собранные файлы будут в `frontend/dist/`

## Лицензия

Проект разработан для внутреннего использования.
