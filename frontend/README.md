# Сервис генерации сертификатов - Фронтенд

Современный веб-интерфейс для генерации цифровых сертификатов с поддержкой мультитенантности.

## Технологии

- **React 18** - UI библиотека
- **TypeScript** - типизация
- **Vite** - сборщик и dev-сервер
- **Tailwind CSS** - стилизация
- **React Router** - маршрутизация
- **Axios** - HTTP клиент
- **React Hot Toast** - уведомления
- **Lucide React** - иконки
- **XLSX** - парсинг Excel файлов
- **React Dropzone** - загрузка файлов
- **ReportLab** (backend) - генерация PDF

## Установка

```bash
npm install
```

## Запуск в режиме разработки

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

**Важно**: Убедитесь, что backend запущен на `http://localhost:8000`

## Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут в папке `dist/`

## Структура проекта

```
src/
├── api/                    # API клиент и методы
│   ├── auth.ts            # Авторизация
│   ├── certificates.ts    # Работа с сертификатами и шаблонами
│   └── client.ts          # Настройка Axios
├── components/            # Переиспользуемые компоненты
│   ├── FileUpload.tsx     # Загрузка файлов
│   ├── Layout.tsx         # Основной layout с навигацией
│   ├── Login.tsx          # Страница входа
│   ├── ParticipantsTable.tsx  # Таблица участников
│   ├── ProtectedRoute.tsx     # Защищенный маршрут
│   └── TemplateModal.tsx      # Модальное окно для шаблонов
├── config/                # Конфигурация
│   └── organizations.ts   # Настройки организаций (цвета, логотипы)
├── contexts/              # React контексты
│   ├── AuthContext.tsx       # Управление авторизацией
│   ├── LanguageContext.tsx    # Управление языками (RU/EN)
│   ├── OrganizationContext.tsx # Управление организацией
│   └── ThemeContext.tsx       # Управление темой (светлая/темная)
├── pages/                 # Страницы приложения
│   └── MainPage.tsx       # Главная страница (SPA)
├── App.tsx               # Главный компонент
├── main.tsx              # Точка входа
└── index.css             # Глобальные стили
```

## Функциональность

### Основные возможности

- ✅ **Мультитенантность**: Поддержка нескольких организаций с индивидуальными цветами
- ✅ **Авторизация**: Логин/пароль для каждой организации
- ✅ **Загрузка участников**: 
  - Импорт из CSV/XLSX файлов
  - Ручное добавление участников
- ✅ **Управление участниками**:
  - Редактирование данных в таблице
  - Удаление отдельных участников
  - Множественный выбор и массовое удаление
  - Пагинация (10 участников на страницу)
- ✅ **Управление шаблонами**:
  - Создание новых шаблонов (SVG/HTML)
  - Редактирование существующих шаблонов
  - Предпросмотр в реальном времени
  - Удаление шаблонов
- ✅ **Генерация сертификатов**:
  - Выбор шаблона
  - Настройка названия мероприятия
  - Установка даты выдачи
  - Генерация PDF сертификатов
  - Скачивание ZIP архива
- ✅ **Темы оформления**: Светлая и темная тема
- ✅ **Многоязычность**: Русский и английский языки
- ✅ **Адаптивный дизайн**: Работает на всех устройствах

### Организации

Поддерживаемые организации:
- **Фонд** (`#5601da`)
- **Лицей** (`#5b1e3d`)
- **Федеральная территория** (`#58a931`)
- **Университет** (`#16bfc2`)
- **Гимназия** (`#2a2840`)

Каждая организация имеет:
- Уникальный цвет (применяется к шапке и кнопкам)
- Возможность добавления логотипа
- Отдельных пользователей

## Переменные окружения

Создайте файл `.env` в корне `frontend/`:

```
VITE_API_URL=http://localhost:8000/api
```

Если переменная не задана, используется значение по умолчанию `/api` (работает через прокси Vite).

## API Endpoints

### Авторизация
- `POST /api/auth/login` - Вход в систему

### Шаблоны
- `GET /api/templates` - Получить список шаблонов
- `POST /api/templates/upload` - Загрузить новый шаблон
- `PUT /api/templates/{id}` - Обновить шаблон
- `DELETE /api/templates/{id}` - Удалить шаблон
- `GET /api/templates/{id}/file` - Получить файл шаблона

### Сертификаты
- `POST /api/certificates/generate` - Сгенерировать сертификаты
- `GET /api/certificates/download/{filename}` - Скачать ZIP с сертификатами

## Особенности реализации

### Мультитенантность

Организация определяется при входе пользователя и сохраняется в `localStorage`. Цвета организации применяются через CSS переменные (`--org-primary`, `--org-accent`).

### Темы

- Переключение между светлой и темной темой
- Шапка всегда использует цвет организации (в обеих темах)
- Плавные переходы между темами

### Языки

- Поддержка русского и английского языков
- Переводы ролей участников
- Переключение через кнопку в шапке

### Управление состоянием

Используются React Context API для:
- Авторизации (`AuthContext`)
- Темы (`ThemeContext`)
- Языка (`LanguageContext`)
- Организации (`OrganizationContext`)

## Разработка

### Структура компонентов

Все компоненты используют функциональный подход с хуками React. Стилизация выполнена с помощью Tailwind CSS с кастомными цветами для организаций.

### Добавление новой организации

1. Откройте `src/config/organizations.ts`
2. Добавьте новую организацию в объект `organizations`:
```typescript
newOrg: {
  id: 'neworg',
  name: 'Новая организация',
  primaryColor: '#hexcolor',
  accentColor: '#hexcolor',
  logoUrl: 'https://example.com/logo.png' // опционально
}
```
3. Создайте пользователя в backend (`backend/main.py`)

## Лицензия

Проект разработан для внутреннего использования.
